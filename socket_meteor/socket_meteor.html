<head>
  <title>socket_meteor</title>
  <link href="bootstrap.css" rel="stylesheet">
  <link href="bootstrap-responsive.css" rel="stylesheet">
</head>

<body>
  {{> main }}
</body>

<template name="main">
<div class="container-fluid">
  {{# if is_admin }}
  <div class="row-fluid">
    <div class="span12">
    {{> admin_panel }}
    </div>
  </div>
  {{/if}}
  <div class="row-fluid">
    <div class="span8">
      {{# if game_started }}
        {{# if game_over }}
          <h1>Game's over!</h1>
        {{else}}
          {{# if player_in_game }}
            {{> current_question }}
          {{else}}
            {{> spectator }}
          {{/if}}
        {{/if}}
      {{else}}
        {{# if player_in_game }}
          {{> wait_for_start }}
        {{else}}
          {{> register_new_user }}
        {{/if}}
      {{/if}}
    </div>
    <div id="span4">
      {{> scoreboard}}
    </div>
  </div>
  <div class="row-fluid">
    <p> PRODUCT_NAME is a speed programming competition.  You get a question.  The first three people to answer correctly get 10, 5, and 3 points respectively.  A wrong answer takes two points away from your score.  The question changes after three people have answered correctly or at the moderator's discretion.  There are 10 (or so) questions.  Good luck.</p>
  </div>
</div>
</template>

<template name="admin_panel">
  <div id="admin_panel" style="border:solid;">
  <h3>Admin Panel</h3>
  {{#if game_started }}
    {{#if game_over }}
      Game's over, no buttons for you
    {{else}}
      <button id="next_round">Next Round</button>
    {{/if}}
  {{else}}
      <button id="start_game">Start Game</button>
  {{/if}}
  </div>
</template>

<template name="wait_for_start">
<h2>{{contestant_name}}, we'll start in a few minutes</h2>
</template>

<template name="scoreboard">
  <h3> In Game</h3>
  <ul>
  {{#each contestants }}
    <li>{{name}} has {{score}} points</li>
  {{else}}
    <li>Nobody has registered</li>
  {{/each}}
  </ul>
</template>

<template name="spectator">
  Sorry, game's started, why don't you watch?
</template>

<template name="current_question">
  <div id="current_question">
    <h1>Question #{{ question_number }}</h1>
    <p>{{ question_text }}</p>
    <p>
      <input id="answer" type="text">
      <button id="answer_question">Submit</button>
    </p>
  </div>
  <h1 id="feedback"></h1>
</template>

<template name="register_new_user">
  <div id="register">
    <input id="username" type="text">
    <button id="register_button">Register</button>
  </div>
</template>
